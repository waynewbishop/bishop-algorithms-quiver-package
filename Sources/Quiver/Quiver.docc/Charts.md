# Swift Charts with Quiver

Create Swift Charts data visualizations using Quiver's array operations.

## Overview

Swift Charts and Quiver make a powerful combination for data visualization. This article demonstrates some examples of how Quiver's `Array` operations can streamline chart data preparation.

## Basic Line Chart

Create a simple sine wave chart using Quiver's evenly spaced sequence generation:

```swift
struct SineWaveChart: View {
    let dataPoints: [(x: Double, y: Double)]
    
    init() {
        // Generate evenly spaced x-values from 0 to 2π
        let xValues = [Double].linspace(0, 2 * .pi, num: 20)
        // Calculate corresponding y-values
        let yValues = xValues.map { sin($0) }
        // Create data points
        self.dataPoints = zip(xValues, yValues).map { (x: $0, y: $1) }
    }
    
    var body: some View {
        Chart(dataPoints, id: \.x) { point in
            LineMark(x: .value("X", point.x), y: .value("Sine", point.y))
        }
        .frame(height: 200)
        .chartYScale(domain: -1.1...1.1)
    }
}
```

**Quiver function used:**
- `[Double].linspace(0, 2 * .pi, num: 20)` - Creates an array of 20 evenly spaced values from 0 to 2π, perfect for generating x-coordinates with consistent spacing.

> Tip: For smooth curves like sine waves, use at least 20 points with `linspace()`. For more complex functions, increase the number of points.

## Bar Chart with Statistics

Enhance a bar chart with statistical insights:

```swift
struct SalesBarChart: View {
    let monthlySales = [42.0, 58.0, 69.0, 53.0, 77.0, 82.0]
    let monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun"]
    
    var body: some View {
        VStack {
            Chart {
                ForEach(Array(zip(monthNames, monthlySales)), id: \.0) { month, sales in
                    BarMark(x: .value("Month", month), y: .value("Sales", sales))
                }
                
                // Add average line using Quiver
                if let avgSales = monthlySales.mean() {
                    RuleMark(y: .value("Average", avgSales))
                        .foregroundStyle(.red)
                        .lineStyle(StrokeStyle(lineWidth: 2, dash: [5, 5]))
                }
            }
            .frame(height: 200)
            
            // Display range using Quiver's min/max
            if let minSales = monthlySales.min(), 
               let maxSales = monthlySales.max() {
                Text("Range: \(minSales, specifier: "%.1f") - \(maxSales, specifier: "%.1f")")
                    .font(.caption)
            }
        }
    }
}
```

**Quiver functions used:**
- `monthlySales.mean()` - Calculates the arithmetic mean of the sales values, which we use for the average line.
- `monthlySales.min()` and `monthlySales.max()` - Find the minimum and maximum values to display the data range.

> Tip: Statistical information like mean, min, and max can add context to your visualizations, helping users better understand your data.

## Scatter Plot with Random Data

Generate random data points for a scatter plot:

```swift
struct RandomScatterPlot: View {
    let dataPoints: [(x: Double, y: Double)]
    
    init() {
        // Generate 20 random x,y points using Quiver
        let xValues = [Double].random(20).map { $0 * 10 } // Scale to 0-10 range
        let yValues = [Double].random(20).map { $0 * 100 } // Scale to 0-100 range
        
        self.dataPoints = zip(xValues, yValues).map { (x: $0, y: $1) }
    }
    
    var body: some View {
        Chart {
            ForEach(dataPoints, id: \.x) { point in
                PointMark(x: .value("X", point.x), y: .value("Y", point.y))
                    .foregroundStyle(.blue)
            }
        }
        .frame(height: 200)
    }
}
```

**Quiver function used:**
- `[Double].random(20)` - Generates 20 random values between 0 and 1, which we then scale for our chart coordinates.

> Tip: You can adjust the distribution of random points by applying transformations to the values generated by `random()`.

> Note: Scaling random values (e.g., `random(20).map { $0 * 10 }`) is a simple way to get random numbers in any range you need.

## Area Chart with Filtered Data

Filter data based on a threshold using Quiver's boolean operations:

```swift
struct FilteredAreaChart: View {
    let temperatures = [68.0, 72.5, 67.8, 75.2, 81.0, 79.5, 83.2, 80.1, 76.3]
    let days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun", "Mon", "Tue"]
    
    var body: some View {
        VStack {
            Chart {
                ForEach(Array(zip(days, temperatures)), id: \.0) { day, temp in
                    AreaMark(x: .value("Day", day), y: .value("Temp", temp))
                        .foregroundStyle(.orange.opacity(0.3))
                }
            }
            .frame(height: 200)
            
            // Use Quiver to analyze hot days (over 75°)
            let isHot = temperatures.isGreaterThan(75.0)
            let hotDays = days.masked(by: isHot)
            
            Text("Hot days: \(hotDays.joined(separator: ", "))")
                .font(.caption)
        }
    }
}
```

**Quiver functions used:**
- `temperatures.isGreaterThan(75.0)` - Creates a boolean mask identifying values above 75.
- `days.masked(by: isHot)` - Uses the boolean mask to filter the corresponding days, showing only those that match our criterion.

> Tip: When using `masked(by:)`, ensure the boolean mask has the same length as the array being filtered. Quiver will check this at runtime.

## Related Articles
- <doc:Operations> - Learn more about the vector operations used in these charts
- <doc:Statistics> - Explore the statistical functions used in the Bar Chart example
- <doc:Boolean> - Understand the boolean filtering used in the Area Chart example
- <doc:Generation> - Discover more about generating sequences and random values
